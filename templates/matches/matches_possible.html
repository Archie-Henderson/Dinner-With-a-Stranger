{% extends 'matches/matches_base.html' %}

{% block title %}Possible Matches{% endblock %}
{% block matches_title %}Possible Matches â€” Find Your New Matches!{% endblock %}
{% block new_active %}active{% endblock %}
{% block possible_active %}active{% endblock %}

{% block matches_grid %}
    {% if matches %}
        {% for match in matches %}
            {% if match.user1 == request.user %}
                {% with other_user=match.user2 %}
                    <div class="match-card">
                        <div class="match-img">
                            <img src="{{ other_user.userprofile.picture.url|default:'/static/images/default.jpg' }}" alt="{{ other_user.username }}">
                        </div>
                        <div class="match-info">
                            <h2>{{ other_user.username }}</h2>
                            <p>{{ other_user.userprofile.description|default:'No bio yet!' }}</p>
                            <a href="{% url 'matches:update_match_status' match.match_id 'accepted' %}" class="match-btn">Match</a>
                            <a href="{% url 'matches:update_match_status' match.match_id 'declined' %}" class="deny-btn">Deny</a>
                        </div>
                    </div>
                {% endwith %}
            {% else %}
                {% with other_user=match.user1 %}
                    <div class="match-card">
                        <div class="match-img">
                            <img src="{{ other_user.userprofile.picture.url|default:'/static/images/default.jpg' }}" alt="{{ other_user.username }}">
                        </div>
                        <div class="match-info">
                            <h2>{{ other_user.username }}</h2>
                            <p>{{ other_user.userprofile.description|default:'No bio yet!' }}</p>
                            <a href="{% url 'matches:update_match_status' match.match_id 'accepted' %}" class="match-btn">Match</a>
                            <a href="{% url 'matches:update_match_status' match.match_id 'declined' %}" class="deny-btn">Deny</a>
                        </div>
                    </div>
                {% endwith %}
            {% endif %}
        {% endfor %}
    {% else %}
        <p>No new matches to suggest.</p>
    {% endif %}
{% endblock %}
